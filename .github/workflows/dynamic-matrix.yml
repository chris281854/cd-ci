name: Matrix 

on: 
  workflow_dispatch:
    inputs:
      node-version:
        description: 'Node Version'
        required: true
        default: "14,15,16,17,18"
        type: string
      os:
        description: 'Operating System'
        required: true
        default: "windows-latest,ubuntu-latest"
        type: string

jobs: 
  prepared-matrix:
     runs-on: ubuntu-latest
     steps:
      - run: echo "step-output=value" >> $GITHUB_OUTPUT
        id: step1
      - run: echo "step-output=value2" >> $GITHUB_OUTPUT
        id: step2
      - run: |
          echo '${{ steps.step1.outputs.step-output }}'
          echo '${{ steps.step2.outputs.step-output }}'

  node-matrix:
        strategy:
            matrix:
                node-version: [12, 14,16]
                os: [ubuntu-latest, windows-latest]
                       
        runs-on: ${{ matrix.os }}
        steps:
       
            - run: node -v
            - uses: actions/setup-node@v3
              with:
               node-version: ${{ matrix.node-version}}
            - run: node -v
 





#---------- comments ----------------#


# by default if one job of the matrix fail the other that are pending will fail, to modify that we use this that if one job fails, the others will continue normally t
# the default value is true
#also fail-fast will prevent that if one job fail the others jobs of beeing cancelled
# fail-fast: false
# it limits the number of parallel jobs
#  max-parallel: 12
# is for adding aditional jobs to the matrix, if one off this 
#parameters don't override the matrix, it will be added to the matrix
# other wise it will override or merge to the elements that already are on the matrix
# if i include ubuntu-18.04 it will be added to the matrix
#includes:
   # - os: ubuntu-latest
   #   is-ubuntu: true 